User sql=fames_user
    Id sql=user_id
    ident Text
    password Text Maybe
    UniqueUser ident
    deriving Typeable
Email sql=fames_email
    email Text
    userId UserId Maybe
    verkey Text Maybe
    UniqueEmail email
Comment sql=fames_comment json -- Adding "json" causes ToJSON and FromJSON instances to be derived.
    message Text
    userId UserId Maybe
    deriving Eq
    deriving Show

 -- By default this file is used in Model.hs (which is imported by Foundation.hs)

BarcodeSeed sql=fames_barcode_seed
    prefix Text 
    lastUsed Int
    UniqueBCSeed prefix
    deriving Eq
    deriving Show

Operator  sql=fames_operator
  Id sql=operator_id
  firstname Text
  surname Text
  nickname Text
  active Bool
  UniqueNickname nickname
  deriving Eq
  deriving Show

-- Represent the key of a document which has been processed.
-- We use a key SHA1 or SHA256 so we can detect if a document
-- has already been processed or not. We don't save the documenty yet.
-- In the future it can be used to retrieve from an external system (git-annex, syncthing, etc ...)
DocumentKey sql=fames_document_key
  Id sql=document_key_id
  type Text sql=document_type
  name Text
  comment Text
  key Text sql=document_key
  userId UserId 
  processedAt UTCTime
  UniqueSK key
  deriving Eq
  deriving Show

-- Stocktake. How many items are in a box.
-- index allows to have multiple variations in the same box.
-- The link to Boxtake is a "soft" link via barcode.
Stocktake sql=fames_stocktake
  Id sql=stocktake_id
  stockId Text sql=stock_id
  quantity Int
  barcode Text
  index Int default=1
  date Day
  active Bool default=True
  operatorId OperatorId
  documentKeyId DocumentKeyId
  UniqueSB barcode index
  deriving Eq
  deriving Show

-- Similar to stocktake but doesn't care about the content.
Boxtake sql=fames_boxtake
  Id sql=boxtake_id
  description Text Maybe
  reference Text
  length Double
  width Double
  height Double
  barcode Text
  location Text sqltype=Blob
  date Day
  active Bool
  operatorId OperatorId
  documentKeyId DocumentKeyId
  UniqueBB barcode
  UniqueBK documentKeyId reference
  deriving Eq
  deriving Show



  
          